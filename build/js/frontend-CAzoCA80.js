!function(e){const t={getCSRF:function(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):""},defaultHeaders:function(e=!1){const t={"X-CSRF-TOKEN":this.getCSRF(),"X-Requested-With":"XMLHttpRequest",Accept:"application/json"};return e||(t["Content-Type"]="application/json"),t},get:async function(e,t={}){try{const n=await fetch(e,{method:"GET",headers:this.defaultHeaders(),...t});return await this.handleResponse(n)}catch(n){throw n}},post:async function(e,t={},n={}){try{const o=await fetch(e,{method:"POST",headers:this.defaultHeaders(),body:JSON.stringify(t),...n});return await this.handleResponse(o)}catch(o){throw o}},postForm:async function(e,t,n={}){try{const o={"X-CSRF-TOKEN":this.getCSRF(),"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},i=await fetch(e,{method:"POST",headers:o,body:t,...n});return await this.handleResponse(i)}catch(o){throw o}},handleResponse:async function(e){const t=e.headers.get("content-type");if(!e.ok){const t=new Error(`HTTP ${e.status}`);throw t.status=e.status,t.response=e,t}return t&&t.includes("application/json")?await e.json():await e.text()},ajax:function(e){const t=e.url,n=(e.method||e.type||"GET").toUpperCase(),o=e.data;let i;return i="GET"===n?this.get(t):o instanceof FormData?this.postForm(t,o):("object"!=typeof o||FormData,this.post(t,o)),i.then(t=>(e.success&&e.success(t),t)).catch(t=>{throw e.error&&e.error(t),t})}};e.FetchHelper=t,e.fetchGet=t.get.bind(t),e.fetchPost=t.post.bind(t),e.fetchForm=t.postForm.bind(t)}(window),function(){function e(){document.querySelectorAll('form[action*="login"], form[action*="register"], form[action*="password"], form[action*="send-otp"]').forEach(function(e){let t=!1;e.addEventListener("submit",function(n){if(t)return n.preventDefault(),!1;t=!0;const o=e.querySelector('button[type="submit"]');if(o){const e=o.innerHTML;o.disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+function(){const e={en:"Processing...",es:"Procesando...",fr:"Traitement...",de:"Verarbeitung...",it:"Elaborazione...",pt:"Processando..."};return e[document.documentElement.lang||"en"]||e.en}(),o.classList.add("btn-loading"),setTimeout(function(){o.disabled&&(o.disabled=!1,o.innerHTML=e,o.classList.remove("btn-loading"),t=!1)},1e4)}!function(e){if(e.querySelector(".form-loading-overlay"))return;const t=document.createElement("div");t.className="form-loading-overlay",t.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(255, 255, 255, 0.8);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 1000;\n            border-radius: inherit;\n        ";const n=document.createElement("div");n.innerHTML='<i class="fas fa-spinner fa-spin fa-2x text-primary"></i>',t.appendChild(n),"static"===window.getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(t),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},1e4)}(e)})})}function t(){(window.location.href.includes("419")||document.querySelector(".csrf-error")||document.body.textContent.includes("CSRF token mismatch"))&&("undefined"!=typeof AIZ&&AIZ.plugins&&AIZ.plugins.notify?AIZ.plugins.notify("warning","Sesión expirada. Recargando página..."):alert("Sesión expirada. La página se recargará automáticamente."),setTimeout(function(){window.location.reload()},2e3))}function n(){!function(){if(document.getElementById("prevent-double-submit-styles"))return;const e=document.createElement("style");e.id="prevent-double-submit-styles",e.textContent="\n            .btn-loading {\n                pointer-events: none;\n                opacity: 0.7;\n                cursor: not-allowed !important;\n            }\n            \n            .btn-loading:hover {\n                opacity: 0.7 !important;\n                transform: none !important;\n            }\n            \n            .form-loading-overlay {\n                backdrop-filter: blur(1px);\n            }\n            \n            @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n            \n            .fa-spin {\n                animation: spin 1s linear infinite;\n            }\n        ",document.head.appendChild(e)}(),e(),document.querySelectorAll('a[href*="logout"], a[href*="delete"], a[href*="confirm"]').forEach(function(e){let t=!1;e.addEventListener("click",function(e){if(t)return e.preventDefault(),!1;t=!0,setTimeout(function(){t=!1},3e3)})}),t(),document.addEventListener("DOMNodeInserted",function(t){("FORM"===t.target.tagName||t.target.querySelector&&t.target.querySelector("form"))&&setTimeout(e,100)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),window.PreventDoubleSubmit={init:n,preventDoubleSubmit:e,handleCSRFErrors:t}}(),function(){window.imageErrorHandler=function(e){e.parentNode&&(e.style.visibility="hidden")};const e=document.querySelector(".home-slider .carousel-box:first-child img");if(e&&e.src){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e.src,t.crossorigin="anonymous",document.head.appendChild(t)}if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazyload"),n.classList.add("lazyloaded"),n.style.opacity="0",n.onload=function(){n.style.transition="opacity 0.3s ease-in-out",n.style.opacity="1"},t.unobserve(n))}})},{rootMargin:"50px 0px",threshold:.01});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("img[data-src]").forEach(t=>{t.src||(t.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2Y4ZjlmYSIvPjx0ZXh0IHg9IjUwIiB5PSI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjYWFhIj5JbWFnZW48L3RleHQ+PC9zdmc+"),e.observe(t)})})}if("connection"in navigator){const e=navigator.connection;!e||"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||document.querySelectorAll("img[data-src]").forEach(e=>{e.dataset.src&&e.dataset.src.includes("?")?e.dataset.src+="&quality=60":e.dataset.src&&(e.dataset.src+="?quality=60")})}function t(){document.querySelectorAll("img").forEach(e=>{const t=e.getBoundingClientRect();t.width>0&&t.height>0&&(window.innerWidth<=768?e.setAttribute("sizes","(max-width: 768px) 100vw, 50vw"):e.setAttribute("sizes","(max-width: 1200px) 50vw, 25vw"))})}let n;document.addEventListener("DOMContentLoaded",t),window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(t,250)}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".home-slider img, .flash-deals img:first-child").forEach((e,t)=>{if(t<3&&e.dataset.src){const t=new Image;t.onload=function(){e.src=e.dataset.src,e.classList.remove("lazyload"),e.classList.add("lazyloaded")},t.src=e.dataset.src}})})}(),window.changeLanguage=window.changeLanguage||function(e){const t=document.createElement("form");t.method="POST",t.action="/language";const n=document.querySelector('meta[name="csrf-token"]');if(n){const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=n.getAttribute("content"),t.appendChild(e)}const o=document.createElement("input");o.type="hidden",o.name="language_code",o.value=e,t.appendChild(o),document.body.appendChild(t),t.submit()},window.changeCurrency=window.changeCurrency||function(e){const t=document.createElement("form");t.method="POST",t.action="/currency";const n=document.querySelector('meta[name="csrf-token"]');if(n){const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=n.getAttribute("content"),t.appendChild(e)}const o=document.createElement("input");o.type="hidden",o.name="currency_code",o.value=e,t.appendChild(o),document.body.appendChild(t),t.submit()},window.addToWishList=window.addToWishList||function(e){window.location.href="/wishlists/store?product_id="+e},window.addToCompare=window.addToCompare||function(e){window.location.href="/compare/addToCompare?product_id="+e},window.showAddToCartModal=window.showAddToCartModal||function(e){const t=document.querySelector(`a[onclick*="showAddToCartModal(${e})"]`);t&&t.href?window.location.href=t.href:window.location.href="/product/"+e},window.clickToSlide=window.clickToSlide||function(e,t){const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth",block:"center"})},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".dropdown-toggle").forEach(e=>{e.addEventListener("keydown",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())})}),document.querySelectorAll("a[onclick]").forEach(e=>{e.addEventListener("focus",function(){this.setAttribute("data-keyboard-focused","true")}),e.addEventListener("blur",function(){this.removeAttribute("data-keyboard-focused")})})}),"undefined"!=typeof $&&$(document).ready(function(){let e;$(".modern-search-input").focus(function(){$(this).closest(".modern-search-box").addClass("focused")}),$(".modern-search-input").blur(function(){$(this).closest(".modern-search-box").removeClass("focused")}),$(".modern-search-input").on("input",function(){const t=$(this).val(),n=$(".typed-search-box");clearTimeout(e),t.length>=2?e=setTimeout(function(){n.removeClass("d-none"),$(".search-preloader").show()},300):n.addClass("d-none")}),$(document).on("click",function(e){$(e.target).closest(".modern-search-container").length||$(".typed-search-box").addClass("d-none")}),$(".modern-dropdown-toggle").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")}),$(".modern-cart-container").hover(function(){$(this).addClass("cart-hovered")},function(){$(this).removeClass("cart-hovered")})});
