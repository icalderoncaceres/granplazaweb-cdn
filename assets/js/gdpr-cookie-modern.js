window.hasConsentForCategory=function(e){try{if("necessary"===e)return!0;const n=document.cookie.split("; ").find(e=>e.startsWith("granplaza_cookie_consent="));if(n){const o=decodeURIComponent(n.split("=")[1]),a=JSON.parse(o);if(Array.isArray(a.categories))return a.categories.includes(e)||a.categories.includes("all")}return!("analytics"!==e||!document.cookie.includes("cookie_consent_analytics=1"))||!("marketing"!==e||!document.cookie.includes("cookie_consent_marketing=1"))||!("preferences"!==e||!document.cookie.includes("cookie_consent_preferences=1"))}catch(n){return"necessary"===e}};const GranPlazaCookiesModern={init:function(){this.loadCookieConsentLibrary()},getCorrectDomain:function(){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return null;if(e.includes("granplaza.eu"))return".granplaza.eu";if(e.includes("granplaza.com"))return".granplaza.com";const n=e.split(".");return n.length>=2?"."+n.slice(-2).join("."):e},loadCookieConsentLibrary:function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css",document.head.appendChild(e);const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js",n.defer=!0,n.onload=()=>this.configureCookieConsent(),document.head.appendChild(n)},configureCookieConsent:function(){this.declareNecessaryCookies();const e=this.checkExistingConsent();e&&this.loadScriptsFromExistingConsent(),CookieConsent.run({autoShow:!e,cookie:{name:"granplaza_cookie_consent",domain:this.getCorrectDomain(),path:"/",expiresAfterDays:365,secure:"https:"===window.location.protocol,sameSite:"Lax"},guiOptions:{consentModal:{layout:"box inline",position:"bottom right",equalWeightButtons:!0,flipButtons:!1},preferencesModal:{layout:"box",position:"right",equalWeightButtons:!0,flipButtons:!1}},onFirstConsent:({cookie:e})=>{this.handleConsentChange(e)},onConsent:({cookie:e})=>{this.setLegacyCookies(e.categories),this.manageThirdPartyScripts(e.categories),this.updateGoogleConsentMode(e.categories)},onChange:({changedCategories:e,changedServices:n})=>{this.handleConsentChange(CookieConsent.getCookie())},categories:{necessary:{readOnly:!0,enabled:!0,services:{laravel_session:{label:"Laravel Session"},csrf_token:{label:"CSRF Protection"},laravel_security:{label:"Security & Authentication"}},autoClear:{cookies:[{name:/^granplaza_session$/,domain:".granplaza.eu"},{name:/^XSRF-TOKEN$/,domain:".granplaza.eu"},{name:/^blk$/,domain:".granplaza.eu"},{name:/^laravel_session$/,domain:".granplaza.eu"},{name:/^remember_web_/,domain:".granplaza.eu"}]}},preferences:{enabled:!0,services:{language:{label:"Language Settings"},currency:{label:"Currency Settings"}},autoClear:{cookies:[{name:/^(lang|currency|theme)/,domain:".granplaza.eu"}]}},analytics:{enabled:!0,services:{google_analytics:{label:"Google Analytics",onAccept:()=>GranPlazaCookiesModern.loadGoogleAnalytics(),cookies:[{name:/^_ga/},{name:/^_gid/},{name:/^_gat/}]},cloudflare_analytics:{label:"Cloudflare Web Analytics",onAccept:()=>GranPlazaCookiesModern.loadCloudflareAnalytics(),cookies:[{name:/^cf_/},{name:/^__cfruid/}]}},autoClear:{cookies:[{name:/^(_ga|_gid|_gat|_gtag)/,domain:".granplaza.eu"},{name:/^cf_/,domain:".granplaza.eu"}]}},marketing:{enabled:!1,services:{facebook_pixel:{label:"Facebook Pixel",onAccept:()=>GranPlazaCookiesModern.loadFacebookPixel(),cookies:[{name:/^_fbp/},{name:/^_fbc/},{name:/^fr/}]},google_ads:{label:"Google Ads",onAccept:()=>GranPlazaCookiesModern.loadGoogleAds(),cookies:[{name:/^_gcl_/},{name:/^AMP_TOKEN/},{name:/^_gac_/}]}},autoClear:{cookies:[{name:/^(_fbp|_fbc|fr)/,domain:".granplaza.eu"},{name:/^(_gcl_|AMP_TOKEN|_gac_)/,domain:".granplaza.eu"}]}}},language:{default:"es",translations:{es:{consentModal:{title:"Configuración de Cookies",description:"Este sitio web utiliza cookies para mejorar su experiencia de navegación, proporcionar funciones de redes sociales y analizar el tráfico web. Puede elegir qué categorías de cookies aceptar.",acceptAllBtn:"Aceptar Todas",acceptNecessaryBtn:"Solo Necesarias",showPreferencesBtn:"Configurar Cookies",footer:'\n                <a href="/privacy-policy">Política de Privacidad</a>\n                <a href="/cookie-policy">Política de Cookies</a>\n                <a href="/terms">Términos y Condiciones</a>\n              '},preferencesModal:{title:"Centro de Preferencias de Cookies",acceptAllBtn:"Aceptar Todas las Cookies",acceptNecessaryBtn:"Solo Cookies Necesarias",savePreferencesBtn:"Guardar Mis Preferencias",closeIconLabel:"Cerrar",serviceCounterLabel:"Servicios",sections:[{title:"Gestión de Cookies",description:"Puede activar o desactivar diferentes tipos de cookies a continuación. Estas configuraciones solo se aplicarán al navegador y dispositivo que está utilizando actualmente."},{title:"Cookies Estrictamente Necesarias",description:"Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen cookies de sesión, autenticación y seguridad.",linkedCategory:"necessary",cookieTable:{headers:{name:"Cookie",service:"Servicio",description:"Propósito",expiration:"Duración"},body:[{name:"granplaza_session",service:"GranPlaza.eu",description:"Mantiene la sesión del usuario mientras navega por el sitio",expiration:"2 horas"},{name:"XSRF-TOKEN",service:"GranPlaza.eu",description:"Protección contra ataques de falsificación de solicitudes entre sitios (CSRF)",expiration:"Sesión"},{name:"blk",service:"GranPlaza.eu",description:"Cookie técnica para el funcionamiento básico del sitio web",expiration:"Sesión"},{name:"laravel_session",service:"GranPlaza.eu",description:"Identificador de sesión del framework Laravel",expiration:"2 horas"},{name:"remember_web_*",service:"GranPlaza.eu",description:'Función "Recordarme" para mantener la sesión iniciada',expiration:"5 años"}]}},{title:"Cookies de Preferencias",description:"Estas cookies permiten que el sitio web recuerde sus preferencias de idioma, moneda y otras configuraciones personales.",linkedCategory:"preferences",cookieTable:{headers:{name:"Cookie",service:"Servicio",description:"Propósito",expiration:"Duración"},body:[{name:"language",service:"GranPlaza.eu",description:"Recuerda el idioma seleccionado",expiration:"1 año"},{name:"currency",service:"GranPlaza.eu",description:"Recuerda la moneda preferida",expiration:"1 año"}]}},{title:"Cookies de Análisis y Rendimiento",description:"Estas cookies nos ayudan a entender cómo los visitantes interactúan con nuestro sitio web recopilando y reportando información de forma anónima.",linkedCategory:"analytics",cookieTable:{headers:{name:"Cookie",service:"Proveedor",description:"Propósito",expiration:"Duración"},body:[{name:"_ga",service:"Google Analytics",description:"Distingue usuarios únicos asignando un número generado aleatoriamente",expiration:"2 años"},{name:"_gid",service:"Google Analytics",description:"Distingue usuarios únicos",expiration:"24 horas"},{name:"__cfruid",service:"Cloudflare",description:"Análisis web y optimización de rendimiento",expiration:"Sesión"}]}},{title:"Cookies de Marketing y Publicidad",description:"Estas cookies se utilizan para mostrar anuncios relevantes y medir la efectividad de las campañas publicitarias.",linkedCategory:"marketing",cookieTable:{headers:{name:"Cookie",service:"Proveedor",description:"Propósito",expiration:"Duración"},body:[{name:"_fbp",service:"Facebook",description:"Almacena y rastrea visitas a través de sitios web",expiration:"3 meses"},{name:"_gcl_*",service:"Google Ads",description:"Almacena información sobre cómo llegó a nuestro sitio",expiration:"90 días"}]}},{title:"Más Información",description:'Para cualquier consulta relacionada con nuestra política de cookies y sus opciones, póngase en contacto con nosotros en <a href="mailto:support@granplaza.eu">support@granplaza.eu</a>.'}]}}}}})},checkExistingConsent:function(){const e=document.cookie.split("; ").find(e=>e.startsWith("granplaza_cookie_consent="));if(e)try{const n=decodeURIComponent(e.split("=")[1]),o=JSON.parse(n);return o.categories&&o.categories.length>0&&o.consentTimestamp&&new Date(o.consentTimestamp)>new Date(Date.now()-31536e6)}catch(o){return!1}const n=document.cookie.split("; ").find(e=>e.startsWith("cookie_consent_given="));return n&&n.includes("=1")},loadScriptsFromExistingConsent:function(){try{const e=document.cookie.split("; ").find(e=>e.startsWith("granplaza_cookie_consent="));let n=[];if(e){const o=decodeURIComponent(e.split("=")[1]);n=JSON.parse(o).categories||[]}else{const e=document.cookie.includes("cookie_consent_analytics=1"),o=document.cookie.includes("cookie_consent_marketing=1"),a=document.cookie.includes("cookie_consent_preferences=1");n=["necessary"],e&&n.push("analytics"),o&&n.push("marketing"),a&&n.push("preferences")}(n.length>1||n.some(e=>"necessary"!==e))&&(this.manageThirdPartyScripts(n),this.callLegacyCompatibilityFunctions(n))}catch(e){}},checkExistingConsent:function(){const e=document.cookie.split("; ").find(e=>e.startsWith("granplaza_cookie_consent="));if(e)try{const n=decodeURIComponent(e.split("=")[1]),o=JSON.parse(n);return o.categories&&o.categories.length>0&&o.consentTimestamp&&new Date(o.consentTimestamp)>new Date(Date.now()-31536e6)}catch(o){return!1}const n=document.cookie.split("; ").find(e=>e.startsWith("cookie_consent_given="));return n&&n.includes("=1")},declareNecessaryCookies:function(){void 0===window.cookieConsentDeclaredCookies&&(window.cookieConsentDeclaredCookies={necessary:["granplaza_session","XSRF-TOKEN","blk","laravel_session","remember_web_*"],analytics:["_ga","_gid","_gat_*","cf_*","__cfruid"],marketing:["_fbp","_fbc","fr","_gcl_*"],preferences:["lang","currency","theme"]})},handleConsentChange:function(e){const n=e.categories;this.setLegacyCookies(n),this.manageThirdPartyScripts(n),this.updateGoogleConsentMode(n),this.callLegacyCompatibilityFunctions(n)},callLegacyCompatibilityFunctions:function(e){window.updateFacebookPixelConsent&&window.updateFacebookPixelConsent(e.includes("marketing")),window.updateConsentMode&&window.updateConsentMode({analytics:e.includes("analytics"),marketing:e.includes("marketing"),preferences:e.includes("preferences")})},setLegacyCookies:function(e){const n=e.includes("analytics")?"1":"0",o=e.includes("marketing")?"1":"0",a=e.includes("preferences")?"1":"0";this.setCompatibilityCookie("cookie_consent_given","1"),this.setCompatibilityCookie("cookie_consent_analytics",n),this.setCompatibilityCookie("cookie_consent_marketing",o),this.setCompatibilityCookie("cookie_consent_preferences",a)},setCompatibilityCookie:function(e,n){const o=window.location.hostname.includes("granplaza.eu")?".granplaza.eu":window.location.hostname,a="https:"===window.location.protocol?";Secure":"",i=new Date(Date.now()+31536e6).toUTCString();document.cookie=`${e}=${n};expires=${i};path=/;domain=${o};SameSite=Lax${a}`},manageThirdPartyScripts:function(e){e.includes("analytics")&&(this.loadGoogleAnalytics(),this.loadCloudflareAnalytics(),this.loadGoogleTagManager()),e.includes("marketing")&&(this.loadFacebookPixel(),this.loadGoogleAds()),e.includes("preferences"),window.updateConsentMode&&window.updateConsentMode({analytics:e.includes("analytics"),marketing:e.includes("marketing"),preferences:e.includes("preferences")})},updateGoogleConsentMode:function(e){"function"==typeof gtag&&gtag("consent","update",{ad_storage:e.includes("marketing")?"granted":"denied",ad_user_data:e.includes("marketing")?"granted":"denied",ad_personalization:e.includes("marketing")?"granted":"denied",analytics_storage:e.includes("analytics")?"granted":"denied"}),window.dataLayer&&(window.dataLayer.push({event:"gtm.consent_update",consent_update:{ad_storage:e.includes("marketing")?"granted":"denied",ad_user_data:e.includes("marketing")?"granted":"denied",ad_personalization:e.includes("marketing")?"granted":"denied",analytics_storage:e.includes("analytics")?"granted":"denied"}}),window.dataLayer.push({event:"cookie_consent_update",analytics_consent:e.includes("analytics"),marketing_consent:e.includes("marketing"),preferences_consent:e.includes("preferences")}))},loadGoogleAnalytics:function(){if(window.gtag)return;const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${window.GA_MEASUREMENT_ID||"GA_MEASUREMENT_ID"}`,document.head.appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",window.GA_MEASUREMENT_ID||"GA_MEASUREMENT_ID")},loadCloudflareAnalytics:function(){if(document.querySelector('script[src*="cloudflareinsights"]'))return;const e=document.createElement("script");e.defer=!0,e.src="https://static.cloudflareinsights.com/beacon.min.js",e.setAttribute("data-cf-beacon",'{"token": "auto"}'),document.head.appendChild(e)},loadFacebookPixel:function(){var e,n,o,a,i,t;window.fbq||window.fbPixelLoaded||window.FACEBOOK_PIXEL_ID&&"TU_FACEBOOK_PIXEL_ID_AQUI"!==window.FACEBOOK_PIXEL_ID&&(e=window,n=document,o="script",e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(i=n.createElement(o)).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(t=n.getElementsByTagName(o)[0]).parentNode.insertBefore(i,t)),fbq("init",window.FACEBOOK_PIXEL_ID),fbq("track","PageView"),window.fbPixelLoaded=!0)},loadGoogleAds:function(){if((!window.gtag||!window.gtagLoaded)&&window.GOOGLE_ADS_ID&&""!==window.GOOGLE_ADS_ID){const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${window.GOOGLE_ADS_ID}`,document.head.appendChild(e),window.gtagLoaded=!0,window.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)}),gtag("js",new Date),gtag("config",window.GOOGLE_ADS_ID)}},loadGoogleTagManager:function(){if((!window.dataLayer||!window.google_tag_manager)&&window.GOOGLE_TAG_MANAGER_ID){var e,n,o,a,i;if(window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),window.dataLayer.push({event:"gtm.consent_default",consent_default:{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"granted"}}),window,e=document,n="script",o=window.GOOGLE_TAG_MANAGER_ID,a=e.getElementsByTagName(n)[0],(i=e.createElement(n)).async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o,i.onload=function(){window.dataLayer.push({event:"page_view",page_title:document.title,page_location:window.location.href})},a.parentNode.insertBefore(i,a),!document.querySelector('iframe[src*="gtm"]')){const e=document.createElement("iframe");e.src=`https://www.googletagmanager.com/ns.html?id=${window.GOOGLE_TAG_MANAGER_ID}`,e.height="0",e.width="0",e.style.display="none",e.style.visibility="hidden",document.body.appendChild(e)}window.google_tag_manager=!0}},isConsentGiven:function(){return!!CookieConsent&&CookieConsent.getCookie().categories.length>1},hasAnalyticsConsent:function(){return!!CookieConsent&&CookieConsent.acceptedCategory("analytics")},hasMarketingConsent:function(){return!!CookieConsent&&CookieConsent.acceptedCategory("marketing")},showPreferences:function(){CookieConsent&&CookieConsent.showPreferences()},reset:function(){CookieConsent&&(CookieConsent.reset(!0),location.reload())}};document.addEventListener("DOMContentLoaded",function(){GranPlazaCookiesModern.init()}),window.GranPlazaCookiesModern=GranPlazaCookiesModern;