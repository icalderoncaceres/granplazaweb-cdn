!function(){"use strict";function e(){document.querySelectorAll('form[action*="login"], form[action*="register"], form[action*="password"], form[action*="send-otp"]').forEach(function(e){let n=!1;e.addEventListener("submit",function(t){if(n)return t.preventDefault(),!1;n=!0;const o=e.querySelector('button[type="submit"]');if(o){const e=o.innerHTML;o.disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+function(){const e={en:"Processing...",es:"Procesando...",fr:"Traitement...",de:"Verarbeitung...",it:"Elaborazione...",pt:"Processando..."};return e[document.documentElement.lang||"en"]||e.en}(),o.classList.add("btn-loading"),setTimeout(function(){o.disabled&&(o.disabled=!1,o.innerHTML=e,o.classList.remove("btn-loading"),n=!1)},1e4)}!function(e){if(e.querySelector(".form-loading-overlay"))return;const n=document.createElement("div");n.className="form-loading-overlay",n.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(255, 255, 255, 0.8);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 1000;\n            border-radius: inherit;\n        ";const t=document.createElement("div");t.innerHTML='<i class="fas fa-spinner fa-spin fa-2x text-primary"></i>',n.appendChild(t);"static"===window.getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(n),setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n)},1e4)}(e)})})}function n(){(window.location.href.includes("419")||document.querySelector(".csrf-error")||document.body.textContent.includes("CSRF token mismatch"))&&("undefined"!=typeof AIZ&&AIZ.plugins&&AIZ.plugins.notify?AIZ.plugins.notify("warning","Sesión expirada. Recargando página..."):alert("Sesión expirada. La página se recargará automáticamente."),setTimeout(function(){window.location.reload()},2e3))}function t(){!function(){if(document.getElementById("prevent-double-submit-styles"))return;const e=document.createElement("style");e.id="prevent-double-submit-styles",e.textContent="\n            .btn-loading {\n                pointer-events: none;\n                opacity: 0.7;\n                cursor: not-allowed !important;\n            }\n            \n            .btn-loading:hover {\n                opacity: 0.7 !important;\n                transform: none !important;\n            }\n            \n            .form-loading-overlay {\n                backdrop-filter: blur(1px);\n            }\n            \n            @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n            \n            .fa-spin {\n                animation: spin 1s linear infinite;\n            }\n        ",document.head.appendChild(e)}(),e(),document.querySelectorAll('a[href*="logout"], a[href*="delete"], a[href*="confirm"]').forEach(function(e){let n=!1;e.addEventListener("click",function(e){if(n)return e.preventDefault(),!1;n=!0,setTimeout(function(){n=!1},3e3)})}),n(),document.addEventListener("DOMNodeInserted",function(n){("FORM"===n.target.tagName||n.target.querySelector&&n.target.querySelector("form"))&&setTimeout(e,100)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.PreventDoubleSubmit={init:t,preventDoubleSubmit:e,handleCSRFErrors:n}}();